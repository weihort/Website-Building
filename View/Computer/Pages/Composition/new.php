<?php
namespace View\Computer\Pages\Composition;

?>
<!-- start comic section -->
<section class="container" id="comic">
    <div class="row">
        <div class="col-md-9">
            <!-- start title -->
            <div class="row">
                <div class="col-md-9">
                    <h2>Comic</h2>
                </div>
                <div class="col-md-3">
                    <ul class="row list-unstyled" style="margin-top:20px;">
                        <li class="col-md-6">
                            <a href="javascript:void(0);" data-cursor='1' data-genre="comic" onclick="javascript:change(jQuery(this));" class="btn btn-default">
                                <span class="glyphicon glyphicon-refresh"></span>
                                <span>换一批</span>
                            </a>
                        </li>
                        <li class="col-md-6">
                            <a href="http://127.0.0.1:8080/View/Computer/Pages/Framework/home.php?page=comic" class="btn btn-default">
                                <span>更多</span>
                                <span>&gt;</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- end title -->
            <!-- start content -->
            <ul class="row list-unstyled" id="comic-specials"></ul>
            <!-- start content -->
        </div>
        <div class="col-md-3">
            <div class="list-group" style="margin-top:20px;">
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
            </div>
        </div>
    </div>
</section>
<!-- end comic section -->

<!-- start game section -->
<section class="container" id="game">
    <div class="row">
        <div class="col-md-9">
            <!-- start title -->
            <div class="row">
                <div class="col-md-9">
                    <h2>Game</h2>
                </div>
                <div class="col-md-3">
                    <ul class="row list-unstyled" style="margin-top:20px;">
                        <li class="col-md-6">
                            <a href="javascript:void(0);" data-cursor='1' data-genre="game" onclick="javascript:change(jQuery(this));" class="btn btn-default">
                                <span class="glyphicon glyphicon-refresh"></span>
                                <span>换一批</span>
                            </a>
                        </li>
                        <li class="col-md-6">
                            <a href="#" class="btn btn-default">
                                <span>更多</span>
                                <span>&gt;</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- end title -->
            <!-- start content -->
            <ul class="row list-unstyled" id="game-specials"></ul>
            <!-- start content -->
        </div>
        <div class="col-md-3">
            <div class="list-group" style="margin-top:20px;">
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
            </div>
        </div>
    </div>
</section>
<!-- end game section -->

<!-- start skill section -->
<section class="container" id="skill">
    <div class="row">
        <div class="col-md-9">
            <!-- start title -->
            <div class="row">
                <div class="col-md-9">
                    <h2>IT Skill</h2>
                </div>
                <div class="col-md-3">
                    <ul class="row list-unstyled" style="margin-top:20px;">
                        <li class="col-md-6">
                            <a href="javascript:void(0);" data-cursor='1' data-genre="skill" onclick="javascript:change(jQuery(this));" class="btn btn-default">
                                <span class="glyphicon glyphicon-refresh"></span>
                                <span>换一批</span>
                            </a>
                        </li>
                        <li class="col-md-6">
                            <a href="#" class="btn btn-default">
                                <span>更多</span>
                                <span>&gt;</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- end title -->
            <!-- start content -->
            <ul class="row list-unstyled" id="skill-specials"></ul>
            <!-- start content -->
        </div>
        <div class="col-md-3">
            <div class="list-group" style="margin-top:20px;">
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
            </div>
        </div>
    </div>
</section>
<!-- end skill section -->

<!-- start party section -->
<section class="container" id="party">
    <div class="row">
        <div class="col-md-9">
            <!-- start title -->
            <div class="row">
                <div class="col-md-9">
                    <h2>Music</h2>
                </div>
                <div class="col-md-3">
                    <ul class="row list-unstyled" style="margin-top:20px;">
                        <li class="col-md-6">
                            <a href="#" class="btn btn-default">
                                <span class="glyphicon glyphicon-refresh"></span>
                                <span>换一批</span>
                            </a>
                        </li>
                        <li class="col-md-6">
                            <a href="#" class="btn btn-default">
                                <span>更多</span>
                                <span>&gt;</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- end title -->
            <!-- start content -->
            <ul class="row list-unstyled" id="party-specials"></ul>
            <!-- start content -->
        </div>
        <div class="col-md-3">
            <div class="list-group" style="margin-top:20px;">
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
                <a href="" class="list-group-item">小道消息</a>
            </div>
        </div>
    </div>
</section>
<!-- end music section -->

<script type="text/javascript">
    for (genre of ['comic', 'skill', 'game']) {
        (function(genre) {
            jQuery("#" + genre + "-specials").ready(function() {
                setRecommend(genre, 0, genre + "-specials", setNew);
            });
        })(genre);
    }

    function setNew (unitRecommendMessage) {
        return "<li class='col-md-4'>" +
                "<a href='" + unitRecommendMessage.content_link + "' class='thumbnail'>" +
                    "<img src='http://127.0.0.1:8080/" + unitRecommendMessage.image_link + "' class='img-responsive img-rounded'>" +
                    "<div class='caption'>" +
                        "<h5>" + unitRecommendMessage.title + "</h5>" +
                        "<ul class='row list-unstyled'>" +
                            "<li class='col-md-6'>" +
                                "<p class='text-left'>" + unitRecommendMessage.author + "</p>" +
                            "</li>" +
                            "<li class='col-md-6'>" +
                                "<p class='text-right'>" + unitRecommendMessage.release_date.split(" ")[0] + "</p>" +
                            "</li>" +
                        "</ul>" +
                    "</div>" +
                "</a>" +
            "</li>";
    }

    function getComicMsg () {
        getArticle(
            "comic",
            function () {
                getComicMsg();
            }
        );
    }

    var getComicMsg = setInterval(
        function () {
        },
        6000
    );

    setTimeout(
        function () {
            var getGameMsg = setInterval(
                function () {
                    getArticle(
                        {genre: 'game', cursor: true},
                        function () {
                            clearInterval(getGameMsg);
                        }
                    );
                },
                6000
            );
        },
        2000
    );

    setTimeout(
        function () {
            var getSkillMsg = setInterval(
                function () {
                    getArticle(
                        {genre: 'skill', cursor: true},
                        function () {
                            clearInterval(getSkillMsg);
                        }
                    );
                },
                6000
            );
        },
        4000
    );


    function change (thisDom) {
        var cursor = thisDom.attr("data-cursor") * 1;
        console.log(cursor);
        var genre  = thisDom.attr('data-genre');
        var index  = setRecommend(genre, cursor, genre + "-specials", setNew);
        thisDom.attr("data-cursor", index + 1);
    }

</script>
